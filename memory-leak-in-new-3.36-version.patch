From 681e84fd429e881425f7f8991a8e6449f89e52f5 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Alberts=20Muktup=C4=81vels?= <alberts.muktupavels@gmail.com>
Date: Thu, 26 Mar 2020 22:28:21 +0200
Subject: [PATCH] system-indicators: fix use after free

https://gitlab.gnome.org/GNOME/gnome-panel/-/issues/21
---
 system-indicators/si-input-sources.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/system-indicators/si-input-sources.c b/system-indicators/si-input-sources.c
index 9a34c74..bca49e4 100644
--- a/system-indicators/si-input-sources.c
+++ b/system-indicators/si-input-sources.c
@@ -291,7 +291,7 @@ ensure_file_exists (const char *icon_theme_path,
 
   g_free (filename);
 
-  if (g_file_test (filename, G_FILE_TEST_EXISTS))
+  if (g_file_test (path, G_FILE_TEST_EXISTS))
     {
       g_free (path);
       return;
-- 
2.24.1
